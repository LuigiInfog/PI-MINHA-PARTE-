{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Login - PFI</title>
<style>
* {margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', sans-serif;}
body {background:#0b1220; color:#f0f0f0; display:flex; flex-direction:column; justify-content:center; align-items:center; min-height:100vh; padding:20px;}
form {background:#12233e; padding:40px; border-radius:10px; box-shadow:0 0 25px rgba(0,170,255,0.4); width:100%; max-width:400px; border:1px solid #1e3a5c;}
h2 {color:#00aaff; text-align:center; margin-bottom:30px; font-size:1.8rem;}
label {display:block; margin-bottom:8px; color:#c0d8f0; font-weight:500;}
input {width:100%; padding:12px; margin-bottom:25px; border-radius:6px; border:1px solid #1e3a5c; background:#0b1220; color:white; font-size:1rem;}
input:focus {outline:none; border-color:#00aaff; box-shadow:0 0 5px rgba(0,170,255,0.5);}
button {width:100%; padding:14px; border:none; border-radius:6px; background:#00aaff; color:white; font-size:1.1rem; cursor:pointer; font-weight:500; transition:background 0.3s;}
button:hover {background:#0088cc;}
.error {color:#ff6666; text-align:center; margin-bottom:20px; padding:10px; background:#2a1a1a; border-radius:4px; border:1px solid #ff6666;}
.logo {text-align:center; margin-bottom:20px; color:#00aaff; font-size:1.5rem; font-weight:bold;}
</style>
</head>
<body>
<div class="logo">SISTEMA PFI</div>
<form id="loginForm">
<h2>Login Agente PFI</h2>
<div class="error" id="error"></div>
<label for="codigo">Código do Agente:</label>
<input type="text" id="codigo" required autocomplete="off" placeholder="Digite seu código">
<label for="senha">Senha:</label>
<input type="password" id="senha" required autocomplete="off" placeholder="Digite sua senha">
<button type="submit">Acessar Sistema</button>
</form>

<script>
const validCredentials = {"139808":"123heinz123","136523":"lurjv123"};
const form = document.getElementById('loginForm');
const errorDiv = document.getElementById('error');

form.addEventListener('submit', e=>{
    e.preventDefault();
    const codigo=form.codigo.value.trim();
    const senha=form.senha.value;
    if(validCredentials[codigo] && validCredentials[codigo]===senha){
        localStorage.setItem('userLogged', codigo);
        window.location.href="{% url 'investigacoes' %}";
    } else {
        errorDiv.textContent='Código ou senha inválidos. Tente novamente.';
    }
});

// Verifica se já está logado
if(localStorage.getItem('userLogged')){
    window.location.href="{% url 'investigacoes' %}";
}
</script>
</body>
</html>